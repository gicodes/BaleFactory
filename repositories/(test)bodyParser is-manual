

const test = async () => {

    const repo = new UsersRepo('users.json');

    // await repo.create({ email: 'test@test.com', password: 'password' })

    // await repo.getOne('b3277fb3')

    // await repo.delete('b3277fb3')

    // await repo.update('f8c8cd00', { password: 'mypass' })

    // user_found = await repo.getOneBy({ id: 'mypassword' })

    // console.log(user_found)


    const users = await repo.getAll();

    console.log(users);

}

// test();


const bodyParser = (req, res, next) => {
    if (req.method === 'POST') {
        req.on('data', data => {
            const parsed = data.toString('utf-8').split('&');
            const formData = {}
            for (let pair of parsed) {
                const [key, value] = pair.split('=');
                formData[key] = value;
            }
            req.body = formData;
            next();
        });
    }
    else {
        next();
    }
}